{"ast":null,"code":"if (document.URL.match(/study/)) {\n  var timer = function timer() {\n    var timer = document.getElementById('timer');\n    var reset = document.getElementById('reset');\n    var start = document.getElementById('start');\n    var open = document.getElementById('open');\n    var rest = document.getElementById('rest');\n    var modal = document.getElementById('modal');\n    var mask = document.getElementById('mask');\n    var startTime;\n    var timeLeft;\n    var timeToCountDown = 2 * 1000;\n    var timerId;\n    var isRunning = false;\n\n    function updateTimer(t) {\n      var d = new Date(t);\n      var m = d.getMinutes();\n      var s = d.getSeconds();\n      var timerString;\n      m = ('0' + m).slice(-2);\n      s = ('0' + s).slice(-2);\n      timerString = m + ':' + s;\n      timer.textContent = timerString;\n      document.title = timerString;\n    }\n\n    function countDown() {\n      timerId = setTimeout(function () {\n        timeLeft = timeToCountDown - (Date.now() - startTime);\n\n        if (timeLeft < 0) {\n          isRunning = false;\n          start.textContent = 'Start';\n          clearTimeout(timerId);\n          timeLeft = 0;\n          timeToCountDown = 0;\n          updateTimer(timeLeft);\n          document.getElementById('open').click();\n          return;\n        }\n\n        updateTimer(timeLeft);\n        countDown();\n      }, 10);\n    }\n\n    start.addEventListener('click', function () {\n      if (isRunning === false) {\n        isRunning = true;\n        start.textContent = 'Stop';\n        startTime = Date.now();\n        countDown();\n      } else {\n        isRunning = false;\n        start.textContent = 'Start';\n        timeToCountDown = timeLeft;\n        clearTimeout(timerId);\n      }\n    }); //  min.addEventListener('click', () => {\n    //    if (isRunning === true) {\n    //      return;\n    //    }\n    //    timeToCountDown += 60 * 1000;\n    //    if (timeToCountDown >= 60 * 60 * 1000) {\n    //     timeToCountDown = 0;\n    //   }\n    //    updateTimer(timeToCountDown);\n    //  });\n    //  sec.addEventListener('click', () => {\n    //   if (isRunning === true) {\n    //     return;\n    //   }\n    //    timeToCountDown += 1000;\n    //    if (timeToCountDown >= 60 * 60 * 1000) {\n    //      timeToCountDown = 0;\n    //    }\n    //    updateTimer(timeToCountDown);\n    //  });\n\n    reset.addEventListener('click', function () {\n      timeToCountDown = 25 * 60 * 1000;\n      updateTimer(timeToCountDown);\n    });\n    open.addEventListener('click', function () {\n      mask.classList.remove('hidden');\n      modal.classList.remove('transform', '-translate-y-5');\n    });\n    rest.addEventListener('click', function () {\n      mask.classList.add('hidden');\n      modal.classList.add('transform', '-translate-y-5');\n    });\n  };\n\n  window.addEventListener('load', timer);\n}","map":{"version":3,"sources":["/Users/joe/My_app/Timmick/app/javascript/study_timer.js"],"names":["document","URL","match","timer","getElementById","reset","start","open","rest","modal","mask","startTime","timeLeft","timeToCountDown","timerId","isRunning","updateTimer","t","d","Date","m","getMinutes","s","getSeconds","timerString","slice","textContent","title","countDown","setTimeout","now","clearTimeout","click","addEventListener","classList","remove","add","window"],"mappings":"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","sourcesContent":["if (document.URL.match( /study/ )) {\n  function timer() {\n    const timer = document.getElementById('timer');\n    const reset = document.getElementById('reset');\n    const start = document.getElementById('start');\n    const open = document.getElementById('open');\n    const rest = document.getElementById('rest');\n    const modal = document.getElementById('modal');\n    const mask = document.getElementById('mask');\n  \n    let startTime;\n    let timeLeft;\n    let timeToCountDown = 2 * 1000;\n    let timerId;\n    let isRunning = false;\n  \n    function updateTimer(t) {\n      let d = new Date(t);\n      let m = d.getMinutes();\n      let s = d.getSeconds();\n      let timerString;\n      m = ('0' + m).slice(-2);\n      s = ('0' + s).slice(-2);\n      timerString = m + ':' + s; \n      timer.textContent = timerString;\n      document.title = timerString;\n    }\n  \n    function countDown() {\n      timerId = setTimeout(function() {\n        timeLeft = timeToCountDown - (Date.now() - startTime);\n        if (timeLeft < 0) {\n          isRunning = false;\n          start.textContent = 'Start';\n          clearTimeout(timerId);\n          timeLeft = 0;\n          timeToCountDown = 0;\n          updateTimer(timeLeft);\n          document.getElementById('open').click();\n          return;\n        }\n        updateTimer(timeLeft);\n        countDown();\n      }, 10);\n    }\n  \n  \n   start.addEventListener('click', () => {\n     if (isRunning === false) {\n       isRunning = true;\n       start.textContent = 'Stop';\n       startTime = Date.now();\n       countDown();\n     } else {\n       isRunning = false;\n       start.textContent = 'Start';\n       timeToCountDown = timeLeft;\n       clearTimeout(timerId);\n     }\n   });\n   \n  //  min.addEventListener('click', () => {\n  //    if (isRunning === true) {\n  //      return;\n  //    }\n  //    timeToCountDown += 60 * 1000;\n  //    if (timeToCountDown >= 60 * 60 * 1000) {\n  //     timeToCountDown = 0;\n  //   }\n  //    updateTimer(timeToCountDown);\n  //  });\n   \n  //  sec.addEventListener('click', () => {\n  //   if (isRunning === true) {\n  //     return;\n  //   }\n  //    timeToCountDown += 1000;\n  //    if (timeToCountDown >= 60 * 60 * 1000) {\n  //      timeToCountDown = 0;\n  //    }\n  //    updateTimer(timeToCountDown);\n  //  });\n   \n   reset.addEventListener('click', () => {\n     timeToCountDown = 25 * 60 * 1000;\n     updateTimer(timeToCountDown);\n   });\n\n   open.addEventListener('click', () => {\n    mask.classList.remove('hidden');\n    modal.classList.remove('transform', '-translate-y-5');\n  });\n\n   rest.addEventListener('click', () => {\n    mask.classList.add('hidden');\n    modal.classList.add('transform', '-translate-y-5');\n  });\n  }\n  \n  window.addEventListener('load', timer)\n}"]},"metadata":{},"sourceType":"module"}